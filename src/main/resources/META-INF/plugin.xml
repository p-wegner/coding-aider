<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>de.andrena.coding-aider</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
    <name>Coding Aider</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor email="peter.wegner@andrena.de" url="https://www.andrena.de">Peter Wegner</vendor>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Simple HTML elements (text formatting, paragraphs, and lists) can be added inside of <![CDATA[ ]]> tag.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description -->
    <description><![CDATA[
        <p>Seamlessly integrate Aider's AI-powered coding assistance directly into your IDE. This integration boosts your productivity by offering rapid access for precision code generation and refactoring, all while allowing you complete control over the context utilized by the LLM.</p>

        <h3>Important Note</h3>
        <p>To utilize this plugin, you must have a functional Aider installation along with access to API keys for the LLM Providers you intend to use. Alternatively, you can run a local LLM inference server, such as Ollama, to connect to Aider.</p>

        <h3>Key Features:</h3>
        <ul>
            <li><strong>AI-Powered Coding Assistance:</strong> Harness the power of Aider to receive intelligent coding assistance within your IDE.</li>
            <li><strong>Intuitive Access:</strong>
                <ul>
                    <li>Quickly initiate Aider actions via the "Start Aider Action" option in the Tools menu or Project View popup menu.</li>
                    <li>Use the keyboard shortcut Alt+A for rapid access.</li>
                    <li>Navigate previous commands with Alt+UP and Alt+DOWN in the message field.</li>
                </ul>
            </li>
            <li><strong>Persistent File Management:</strong> Efficiently manage frequently used files for Aider operations with Alt+Shift+A or within the Aider Command Window.</li>
            <li><strong>Dual Execution Modes:</strong>
                <ul>
                    <li>IDE-based execution for seamless integration.</li>
                    <li>Shell-based execution for users who prefer Aider's rich terminal interaction.</li>
                </ul>
            </li>
            <li><strong>Git Integration:</strong> Automatically launch a Git comparison tool post-Aider operations for easy change review.</li>
            <li><strong>Real-time Progress Tracking:</strong> Monitor Aider command progress through an interactive Markdown dialog.</li>
            <li><strong>Multi-File Support:</strong> Execute Aider actions on multiple files or directories while controlling the context provided to Aider from your IDE.</li>
        </ul>

        <h3>Advantages Over Other Coding Assistant Plugins:</h3>
        <p>Coding-Aider addresses limitations in existing IntelliJ plugins, particularly for tasks involving multiple file creation or modification. Aider's unique capabilities include:</p>
        <ol>
            <li>Optimized token usage for improved speed (featuring replace edit mode, repo-map, and context control).</li>
            <li>A feature-rich terminal interface for command-line enthusiasts.</li>
            <li>An extensive range of commands to automate common development tasks.</li>
            <li>Robust recovery mechanisms with seamless Git integration.</li>
        </ol>

        <p>Coding-Aider brings these powerful terminal-based features directly into your IDE, leveraging established IDE functionalities like Git integration and keyboard shortcuts.</p>
    ]]></description>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>
    <depends>org.jetbrains.plugins.terminal</depends>
    <depends>Git4Idea</depends>
    <actions>
        <group id="de.andrena.codingaider.AiderActionGroup" text="Aider Actions" popup="true">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <action id="de.andrena.codingaider.AiderAction"
                    class="de.andrena.codingaider.AiderAction"
                    text="Start Aider Action"
                    description="This will instruct aider to do something">
                <keyboard-shortcut keymap="$default" first-keystroke="alt A"/>
            </action>
            <action id="de.andrena.codingaider.AiderDirectShellAction"
                    class="de.andrena.codingaider.AiderDirectShellAction"
                    text="Start Aider in Shell Mode"
                    description="This will directly start aider in shell mode with default settings">
                <keyboard-shortcut keymap="$default" first-keystroke="alt shift S"/>
            </action>
            <action id="de.andrena.codingaider.AiderDefaultShellAction"
                    class="de.andrena.codingaider.AiderDefaultShellAction"
                    text="Start Aider with Default Settings"
                    description="This will directly start aider in shell mode with default settings from AiderInputDialog">
                <keyboard-shortcut keymap="$default" first-keystroke="alt shift D"/>
            </action>
            <action id="de.andrena.codingaider.PersistentFilesAction"
                    class="de.andrena.codingaider.PersistentFilesAction"
                    text="Add to Persistent Files"
                    description="Add or remove files from the persistent files list">
                <keyboard-shortcut keymap="$default" first-keystroke="alt shift A"/>
            </action>
        </group>
    </actions>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">
        <projectConfigurable
                instance="de.andrena.codingaider.settings.AiderSettingsConfigurable"
                displayName="Aider Settings"
                id="de.andrena.codingaider.settings.AiderSettingsConfigurable"
                parentId="tools"
                nonDefaultProject="true"/>
    </extensions>
</idea-plugin>
